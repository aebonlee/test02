# 02. ë¹Œë” ê³„ì • ID ìƒì„± ê·œì¹™

> ë¹Œë” ê³„ì • ê°œì„¤ë¹„ ì…ê¸ˆ í™•ì¸ ì‹œ ë¶€ì—¬ë˜ëŠ” ê³ ìœ  ID ìƒì„± ê·œì¹™

---

## 1. ID í˜•ì‹ (12ìë¦¬)

```
YY MM NNNNNN XX
â”‚  â”‚  â”‚      â””â”€ ê°œì„¤ë¹„ ê¸ˆì•¡ ì½”ë“œ (2ìë¦¬)
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€ ì¼ë ¨ë²ˆí˜¸ (6ìë¦¬, ì›”ë³„ ì´ˆê¸°í™”)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì›” (2ìë¦¬)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì—°ë„ (2ìë¦¬)
```

**ì˜ˆì‹œ:** `2512000001TH` = 2025ë…„ 12ì›”, 1ë²ˆì§¸, 300ë§Œì›

---

## 2. ê¸ˆì•¡ ì½”ë“œí‘œ

| ê¸ˆì•¡ | ì½”ë“œ | ê¸ˆì•¡ | ì½”ë“œ |
|------|------|------|------|
| 300ë§Œì› | TH | 600ë§Œì› | SI |
| 400ë§Œì› | FO | 700ë§Œì› | SE |
| 500ë§Œì› | FI | 800ë§Œì› | EI |
|  |  | 900ë§Œì› | NI |

---

## 3. ì¼ë ¨ë²ˆí˜¸ ê·œì¹™

- **6ìë¦¬ ê³ ì •**: 000001 ~ 999999
- **ì›”ë³„ ì´ˆê¸°í™”**: ë§¤ì›” 1ì¼ì— 000001ë¶€í„° ì‹œì‘
- **ìˆœì°¨ ì¦ê°€**: ê°™ì€ ì›” ë‚´ì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì¦ê°€

```
2512000001TH  â† 12ì›” 1ë²ˆì§¸
2512000002TH  â† 12ì›” 2ë²ˆì§¸
2512000003TH  â† 12ì›” 3ë²ˆì§¸
...
2601000001TH  â† ë‹¤ìŒí•´ 1ì›” 1ë²ˆì§¸ (ì›”ë³„ ì´ˆê¸°í™”)
```

---

## 4. ìƒì„± ì•Œê³ ë¦¬ì¦˜

### JavaScript ì½”ë“œ

```javascript
/**
 * ë¹Œë” ê³„ì • ID ìƒì„± (12ìë¦¬)
 * í˜•ì‹: YYMMNNNNNNXX
 */
async function generateBuilderAccountId(amount) {
    const now = new Date();
    const year = String(now.getFullYear()).slice(-2);  // 2ìë¦¬ ì—°ë„
    const month = String(now.getMonth() + 1).padStart(2, '0');  // 2ìë¦¬ ì›”

    // ê¸ˆì•¡ë³„ ì½”ë“œ
    const amountCodes = {
        3000000: 'TH', 4000000: 'FO', 5000000: 'FI',
        6000000: 'SI', 7000000: 'SE', 8000000: 'EI', 9000000: 'NI'
    };
    const amountCode = amountCodes[amount] || 'TH';

    // í•´ë‹¹ ì›”ì˜ ê¸°ì¡´ ë¹Œë” ID ê°œìˆ˜ ì¡°íšŒ
    const prefix = year + month;
    const { count, error } = await supabaseClient
        .from('users')
        .select('*', { count: 'exact', head: true })
        .like('builder_id', `${prefix}%`);  // âš ï¸ builder_id ê¸°ì¤€ìœ¼ë¡œ ì¡°íšŒ!

    // 6ìë¦¬ ì¼ë ¨ë²ˆí˜¸ ìƒì„±
    const serialNumber = String((count || 0) + 1).padStart(6, '0');  // âš ï¸ 6ìë¦¬!

    return `${year}${month}${serialNumber}${amountCode}`;
}
```

---

## 5. ì£¼ì˜ì‚¬í•­

### â›” ì ˆëŒ€ ê¸ˆì§€

```
ğŸš« ì¼ë ¨ë²ˆí˜¸ 2ìë¦¬ ì‚¬ìš© ê¸ˆì§€ (padStart(2, '0'))
ğŸš« user_id ê¸°ì¤€ ì¹´ìš´íŠ¸ ê¸ˆì§€ (builder_id ê¸°ì¤€ìœ¼ë¡œ!)
ğŸš« BLDR-YYMM-NNN ê°™ì€ ë¹„í‘œì¤€ í˜•ì‹ ì‚¬ìš© ê¸ˆì§€
```

### âœ… í•„ìˆ˜ í™•ì¸

```
âœ… ë°˜ë“œì‹œ 12ìë¦¬ í˜•ì‹ ì‚¬ìš©
âœ… ì¼ë ¨ë²ˆí˜¸ëŠ” 6ìë¦¬ (padStart(6, '0'))
âœ… builder_id ì»¬ëŸ¼ ê¸°ì¤€ìœ¼ë¡œ ê¸°ì¡´ ê°œìˆ˜ ì¡°íšŒ
âœ… ê¸ˆì•¡ì— ë§ëŠ” ì½”ë“œ ì‚¬ìš© (ê¸°ë³¸ê°’: TH)
```

---

## 6. ìœ íš¨ì„± ê²€ì¦

### ì •ê·œì‹

```javascript
const builderIdPattern = /^\d{4}\d{6}[A-Z]{2}$/;
// ^\d{4}     = YYMM (4ìë¦¬ ìˆ«ì)
// \d{6}      = NNNNNN (6ìë¦¬ ì¼ë ¨ë²ˆí˜¸)
// [A-Z]{2}$  = XX (2ìë¦¬ ì˜ë¬¸ ì½”ë“œ)
```

### ê²€ì¦ í•¨ìˆ˜

```javascript
function isValidBuilderId(builderId) {
    if (!builderId || builderId.length !== 12) return false;

    const pattern = /^\d{4}\d{6}(TH|FO|FI|SI|SE|EI|NI)$/;
    return pattern.test(builderId);
}
```

---

## 7. ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ìš©ë„ |
|------|------|
| `pages/admin-dashboard.html` | ë¹Œë” ID ìƒì„± í•¨ìˆ˜ (`generateDeveloperAccountId`) |
| `P2_í”„ë¡œì íŠ¸_ê¸°íš/Workflows/Admin_Operations_Workflow.md` | ê´€ë¦¬ì ìš´ì˜ ê°€ì´ë“œ |

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] IDê°€ 12ìë¦¬ì¸ê°€?
- [ ] í˜•ì‹ì´ YYMMNNNNNNXXì¸ê°€?
- [ ] ì¼ë ¨ë²ˆí˜¸ê°€ 6ìë¦¬ì¸ê°€?
- [ ] ê¸ˆì•¡ ì½”ë“œê°€ ì˜¬ë°”ë¥¸ê°€?
- [ ] builder_id ê¸°ì¤€ìœ¼ë¡œ ì¹´ìš´íŠ¸í–ˆëŠ”ê°€?
