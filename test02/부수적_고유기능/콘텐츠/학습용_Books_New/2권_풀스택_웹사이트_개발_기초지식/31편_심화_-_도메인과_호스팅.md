# 31편 | 심화 - 도메인과 호스팅

---

21편에서 DevOps 영역을 살펴보면서 배포와 Vercel에 대해 간략히 다뤘습니다. 이번 편에서는 **도메인과 호스팅**에 대해 더 깊이 파고들어 봅니다. 웹사이트를 인터넷에 공개하려면 반드시 알아야 할 핵심 지식입니다.

## 1. 도메인의 이해

### 1-1. 도메인이란

**도메인**은 웹사이트의 주소입니다. IP 주소(192.168.0.1 같은 숫자)를 사람이 기억하기 쉬운 문자로 표현한 것입니다.

google.com의 실제 IP 주소는 142.250.196.110입니다. 숫자를 외우는 것보다 google.com이 훨씬 기억하기 쉽습니다.

### 1-2. 도메인 구조

도메인은 계층 구조로 되어 있습니다.

```
www.example.com
 │      │     │
 │      │     └── TLD (최상위 도메인)
 │      └──────── 2차 도메인 (우리가 구매하는 것)
 └─────────────── 서브도메인
```

**최상위 도메인(TLD) 종류:**
- 일반: .com, .org, .net, .edu
- 국가: .kr, .jp, .us
- 신규: .app, .dev, .io, .ai

### 1-3. 서브도메인

서브도메인은 메인 도메인 앞에 붙여서 서비스를 구분합니다.

**네이버 예시:**
- naver.com → 메인
- mail.naver.com → 메일
- blog.naver.com → 블로그
- map.naver.com → 지도

하나의 도메인으로 여러 서브도메인을 무제한 생성할 수 있습니다.

### 1-4. DNS 작동 원리

**DNS(Domain Name System)**는 도메인을 IP 주소로 변환해주는 시스템입니다.

```
브라우저에 google.com 입력
         ↓
DNS 서버에 IP 주소 요청
         ↓
DNS 서버가 142.250.196.110 응답
         ↓
브라우저가 해당 IP로 접속
         ↓
구글 서버가 웹페이지 전송
```

이 과정은 몇 초 안에 완료됩니다.

---

## 2. 호스팅의 이해

### 2-1. 호스팅이란

**호스팅**은 웹사이트 파일을 저장하고 인터넷에 공개하는 서비스입니다. 웹사이트가 살 집을 임대하는 것과 같습니다.

우리가 만든 HTML, CSS, JavaScript 파일은 내 컴퓨터에만 있으면 다른 사람이 볼 수 없습니다. 24시간 켜져 있는 서버에 올려야 전 세계에서 접속할 수 있습니다.

### 2-2. 호스팅 종류 비교

| 종류 | 비유 | 특징 | 적합한 경우 |
|------|------|------|-------------|
| 공유 호스팅 | 셰어하우스 | 저렴, 느림 | 개인 블로그 |
| VPS 호스팅 | 오피스텔 | 독립 자원 | 중소 비즈니스 |
| 전용 서버 | 단독 주택 | 최고 성능 | 대규모 서비스 |
| 클라우드 | 유연한 자원 | 확장성 | AWS, GCP |

### 2-3. 정적 호스팅 서비스

최근에는 정적 웹사이트 전문 호스팅이 인기입니다.

| 서비스 | 무료 제한 | 특징 |
|--------|----------|------|
| GitHub Pages | 1GB | GitHub 연동 |
| Netlify | 100GB/월 | 폼 처리, 서버리스 |
| Vercel | 100GB/월 | 빠른 속도, Next.js 최적화 |

---

## 3. Vercel 배포 실전 가이드

### 3-1. Vercel 프로젝트 생성

1. https://vercel.com 접속 → GitHub 로그인
2. **Add New...** → **Project**
3. GitHub 저장소 선택
4. 설정 입력:

| 항목 | 입력 |
|------|------|
| Project Name | ssal-works (소문자, 하이픈만) |
| Framework Preset | Other |
| Root Directory | Production/Frontend |
| Build Command | (비워두기) |

5. **Deploy** 클릭

### 3-2. 환경변수 설정

1. Vercel → Project → **Settings** → **Environment Variables**
2. 환경변수 추가:

| Key | Value |
|-----|-------|
| SUPABASE_URL | https://xxx.supabase.co |
| SUPABASE_ANON_KEY | eyJxxx... |
| SUPABASE_SERVICE_ROLE_KEY | eyJxxx... |
| RESEND_API_KEY | re_xxx... |

3. Environment: **All** 선택

### 3-3. vercel.json 설정

```json
{
  "version": 2,
  "name": "ssalworks-v1",
  "buildCommand": null,
  "outputDirectory": ".",
  "framework": null,
  "rewrites": [
    {
      "source": "/api/:path*",
      "destination": "/api/:path*"
    }
  ],
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        { "key": "Access-Control-Allow-Origin", "value": "*" },
        { "key": "Access-Control-Allow-Methods", "value": "GET,POST,PUT,DELETE,OPTIONS" }
      ]
    }
  ],
  "functions": {
    "api/**/*.js": {
      "maxDuration": 30,
      "memory": 1024
    }
  }
}
```

---

## 4. 도메인 연결 실전

### 4-1. Vercel에 도메인 추가

1. Vercel → Project → **Settings** → **Domains**
2. 도메인 입력: `www.ssalworks.ai.kr`
3. **Add** 클릭
4. 아래 정보 복사:

| Type | Name | Value |
|------|------|-------|
| A | www | 76.76.21.21 |
| TXT | _vercel | vc-domain-verify=... |

### 4-2. DNS 설정 (Whois 예시)

1. https://whois.co.kr 로그인
2. 도메인 관리 → 해당 도메인 선택
3. 부가서비스 → **네임서버 고급설정**

**A 레코드 추가:**
| 호스트명 | IP 주소 |
|----------|---------|
| www | 76.76.21.21 |

**TXT 레코드 추가:**
| 호스트명 | 값 |
|----------|-----|
| _vercel | vc-domain-verify=... (Vercel에서 복사) |

### 4-3. DNS 전파 확인

명령어로 확인:
```bash
nslookup www.ssalworks.ai.kr 8.8.8.8
```

Vercel Dashboard 상태:
- ⚠️ Verification Needed → 전파 대기
- ✅ Valid Configuration → 성공

**주의:** DNS 전파는 최대 48시간 소요될 수 있습니다.

---

## 5. 주요 DNS 레코드 타입

| 타입 | 용도 | 예시 |
|------|------|------|
| A | 도메인 → IPv4 주소 | example.com → 76.76.21.21 |
| AAAA | 도메인 → IPv6 주소 | 거의 안 씀 |
| CNAME | 도메인 → 다른 도메인 | www → example.com |
| MX | 이메일 서버 지정 | 메일 수신용 |
| TXT | 도메인 소유권 확인 | Vercel, Google 인증 |

---

## 6. 트러블슈팅

### 문제 1: Project Name 에러

**증상:** `The name contains invalid characters`

**해결:** 소문자, 숫자, 하이픈만 사용
- ❌ `SSALWorks`
- ✅ `ssal-works`

### 문제 2: 함수 패턴 에러

**증상:** `The pattern doesn't match any Serverless Functions`

**해결:** vercel.json에서 존재하지 않는 패턴 제거

### 문제 3: 도메인 소유권 확인

**증상:** `This domain is linked to another Vercel account`

**해결:**
1. TXT 레코드 추가 (_vercel)
2. DNS 전파 대기
3. Vercel에서 "Refresh" 클릭

### 문제 4: DNS_PROBE_FINISHED_NXDOMAIN

**해결:** DNS 전파 완료까지 대기 (최대 48시간)

### 문제 5: 특수문자 입력 불가

**해결:** 일반 DNS 관리가 아닌 **네임서버 고급설정** 사용

---

## 7. 권장 설정

| 항목 | 권장 값 |
|------|---------|
| 네임서버 | Whois 기본값 (ns1.whoisdomain.kr) |
| DNS 관리 | Whois 네임서버 고급설정 |
| 도메인 | www.example.com (www 포함 권장) |
| A 레코드 | 76.76.21.21 (Vercel 기본) |

---

## 8. 배포 체크리스트

**Vercel 설정:**
- [ ] Vercel 프로젝트 생성 완료
- [ ] Root Directory 설정 (Production/Frontend)
- [ ] 환경변수 설정 완료
- [ ] 첫 배포 성공

**도메인 연결:**
- [ ] Vercel에 도메인 추가 완료
- [ ] A 레코드 설정 완료
- [ ] TXT 레코드 설정 완료
- [ ] DNS 전파 확인 완료

**최종 확인:**
- [ ] https://www.example.com 접속 성공
- [ ] SSL 인증서 자동 적용 확인 (자물쇠 아이콘)

---

## 정리

도메인과 호스팅은 웹사이트를 세상에 공개하는 필수 요소입니다.

**핵심 개념:**
- 도메인 = 주소 (사람이 기억하기 쉬운 이름)
- 호스팅 = 집 (파일이 저장되는 서버)
- DNS = 전화번호부 (도메인 → IP 변환)

**실전 팁:**
- Vercel은 정적 사이트 + Serverless 함수에 최적
- 도메인 연결 시 TXT 레코드로 소유권 확인 필요
- DNS 전파는 최대 48시간, 인내심 필요

처음에는 무료 호스팅(Vercel, Netlify)으로 시작하고, 트래픽이 늘어나면 유료 플랜으로 업그레이드하는 전략이 좋습니다.

---

**작성일: 2025-12-21 / 작성자: Claude Code**
