# 15편 | 파일 다루기

---

Claude Code는 로컬 파일 시스템과 직접 상호작용한다. 파일을 읽고, 쓰고, 수정하고, 검색하는 6가지 내장 도구가 있다. 이 도구들은 Claude Code가 자동으로 선택해서 사용하지만, 각 도구의 특성을 알면 더 정확한 요청을 할 수 있다.

## 1. 파일 다루기 도구 개요

### 1-1 6가지 도구

| 도구 | 기능 | 사용 예시 |
|------|------|----------|
| **Read** | 파일 읽기 | 코드 파일, 이미지, PDF 읽기 |
| **Write** | 파일 쓰기 | 새 파일 생성, 전체 덮어쓰기 |
| **Edit** | 파일 편집 | 특정 부분만 수정 |
| **Glob** | 파일 찾기 | 패턴으로 파일 목록 검색 |
| **Grep** | 내용 검색 | 파일 내용에서 텍스트 검색 |
| **NotebookEdit** | 노트북 편집 | Jupyter 노트북 셀 수정 |

### 1-2 도구 선택 기준

Claude Code는 요청에 따라 적절한 도구를 자동으로 선택한다.

**"이 파일 보여줘"** → Read
**"새 파일 만들어줘"** → Write
**"이 부분만 수정해줘"** → Edit
**"js 파일 다 찾아줘"** → Glob
**"에러 메시지가 있는 파일 찾아줘"** → Grep

## 2. Read - 파일 읽기

### 2-1 기본 사용

Read는 파일의 내용을 읽어오는 도구이다. 단순히 "이 파일 읽어줘"라고 하면 Claude Code가 Read 도구를 사용한다.

**지원하는 파일 유형:**
- 텍스트 파일: .js, .py, .md, .json, .txt 등
- 이미지 파일: .png, .jpg, .gif, .webp 등
- 문서 파일: .pdf
- 노트북: .ipynb

### 2-2 텍스트 파일 읽기

가장 기본적인 사용법이다. 코드 파일, 설정 파일, 문서 파일 등을 읽는다.

```
사용자: src/index.js 파일 읽어줘
Claude: [Read 도구로 파일 읽기]
        파일 내용을 분석해서 설명...
```

**특징:**
- 줄 번호가 함께 표시됨
- 2000줄까지 기본으로 읽음
- 긴 파일은 offset과 limit으로 부분 읽기 가능

### 2-3 이미지 파일 읽기

Claude Code는 이미지를 "읽을" 수 있다. 이미지 파일 경로를 주면 이미지 내용을 분석한다.

```
사용자: screenshot.png 파일 보고 뭐가 잘못됐는지 알려줘
Claude: [Read 도구로 이미지 분석]
        스크린샷을 보니 에러 메시지가 보입니다...
```

**활용 예시:**
- 에러 화면 캡처 분석
- UI 디자인 리뷰
- 차트나 다이어그램 해석

### 2-4 PDF 파일 읽기

PDF 문서도 읽을 수 있다. 페이지별로 텍스트와 시각적 내용을 모두 분석한다.

```
사용자: api-documentation.pdf 읽고 인증 방법 알려줘
Claude: [Read 도구로 PDF 분석]
        문서에 따르면 API 인증은 Bearer 토큰을 사용합니다...
```

### 2-5 Jupyter 노트북 읽기

.ipynb 파일도 읽을 수 있다. 코드 셀, 마크다운 셀, 출력 결과까지 모두 표시된다.

```
사용자: analysis.ipynb 읽고 결과 요약해줘
Claude: [Read 도구로 노트북 분석]
        노트북에서 데이터 분석을 수행했고, 결과는...
```

### 2-6 부분 읽기

파일이 너무 길면 특정 부분만 읽을 수 있다.

```
사용자: 이 파일 100번째 줄부터 50줄만 보여줘
Claude: [Read 도구 - offset: 100, limit: 50]
```

## 3. Write - 파일 쓰기

### 3-1 기본 사용

Write는 파일을 새로 생성하거나 전체 내용을 덮어쓴다.

```
사용자: hello.js 파일 만들어줘. console.log('Hello') 코드로
Claude: [Write 도구로 파일 생성]
        hello.js 파일을 생성했습니다.
```

### 3-2 새 파일 생성

존재하지 않는 파일 경로를 지정하면 새 파일이 생성된다.

```
사용자: src/utils/helper.js 파일 만들어줘
Claude: [Write 도구로 새 파일 생성]
```

**주의사항:**
- 부모 디렉토리가 없으면 에러 발생
- 먼저 디렉토리 생성 필요 (Bash로 mkdir)

### 3-3 기존 파일 덮어쓰기

이미 존재하는 파일에 Write를 사용하면 전체 내용이 새 내용으로 교체된다.

```
사용자: config.json 내용 전체를 이걸로 바꿔줘
Claude: [Write 도구로 전체 덮어쓰기]
```

**중요:** 부분 수정이 필요하면 Write 대신 Edit를 사용해야 한다.

### 3-4 Write vs Edit 선택 기준

| 상황 | 사용할 도구 |
|------|------------|
| 새 파일 생성 | Write |
| 파일 전체 교체 | Write |
| 파일 일부분 수정 | Edit |
| 특정 함수만 변경 | Edit |

## 4. Edit - 파일 편집

### 4-1 기본 사용

Edit는 파일의 특정 부분만 수정한다. 전체를 덮어쓰지 않고 지정한 텍스트만 교체한다.

```
사용자: index.js에서 포트 3000을 8080으로 바꿔줘
Claude: [Edit 도구로 특정 부분만 수정]
        const port = 3000 → const port = 8080
```

### 4-2 작동 원리

Edit는 "old_string"을 찾아서 "new_string"으로 교체한다.

```
old_string: const port = 3000
new_string: const port = 8080
```

**중요한 규칙:**
- old_string은 파일 내에서 **유일**해야 함
- 같은 문자열이 여러 개 있으면 에러 발생
- 이 경우 더 많은 주변 컨텍스트를 포함해야 함

### 4-3 유일성 확보

같은 텍스트가 여러 곳에 있으면 주변 코드를 더 포함해서 유일하게 만든다.

**실패 예시:**
```
old_string: return null
→ 에러: 파일에 'return null'이 5군데 있음
```

**성공 예시:**
```
old_string: function getData() {
  return null
}
→ 성공: 이 블록은 유일함
```

### 4-4 replace_all 옵션

모든 일치하는 부분을 한번에 바꾸려면 replace_all을 사용한다.

```
사용자: 이 파일에서 'oldName'을 전부 'newName'으로 바꿔줘
Claude: [Edit 도구 - replace_all: true]
        12개 항목을 교체했습니다.
```

### 4-5 들여쓰기 주의

Edit 시 들여쓰기(탭/스페이스)를 정확히 맞춰야 한다. 원본 파일의 들여쓰기를 그대로 유지해야 수정이 성공한다.

## 5. Glob - 파일 찾기

### 5-1 기본 사용

Glob은 패턴을 사용해서 파일을 찾는다. 파일 이름이나 경로로 검색할 때 사용한다.

```
사용자: js 파일 다 찾아줘
Claude: [Glob 도구 - 패턴: **/*.js]
        src/index.js
        src/utils/helper.js
        tests/app.test.js
        ...
```

### 5-2 패턴 문법

| 패턴 | 의미 | 예시 |
|------|------|------|
| `*` | 모든 문자 (디렉토리 제외) | `*.js` → 현재 폴더의 js 파일 |
| `**` | 모든 디렉토리 | `**/*.js` → 모든 하위 폴더의 js 파일 |
| `?` | 한 글자 | `file?.js` → file1.js, fileA.js |
| `{a,b}` | a 또는 b | `*.{js,ts}` → js 또는 ts 파일 |

### 5-3 자주 쓰는 패턴

```
**/*.js          # 모든 JavaScript 파일
src/**/*.ts      # src 폴더 내 모든 TypeScript 파일
**/*.test.js     # 모든 테스트 파일
**/package.json  # 모든 package.json 파일
```

### 5-4 결과 정렬

Glob 결과는 수정 시간 순으로 정렬된다. 최근 수정된 파일이 먼저 나온다.

## 6. Grep - 내용 검색

### 6-1 기본 사용

Grep은 파일 내용에서 텍스트를 검색한다. 특정 코드나 문자열이 어디 있는지 찾을 때 사용한다.

```
사용자: console.log가 있는 파일 찾아줘
Claude: [Grep 도구 - 패턴: console.log]
        src/index.js: 5개 일치
        src/utils/debug.js: 12개 일치
        ...
```

### 6-2 출력 모드

| 모드 | 결과 |
|------|------|
| files_with_matches | 파일 경로만 (기본값) |
| content | 일치하는 줄 내용 표시 |
| count | 파일별 일치 수 |

### 6-3 정규식 사용

Grep은 정규식을 지원한다.

```
사용자: function으로 시작하는 함수 정의 찾아줘
Claude: [Grep 도구 - 패턴: function\s+\w+]
```

**자주 쓰는 정규식:**
```
function\s+\w+     # 함수 정의
import.*from      # import 문
TODO|FIXME        # TODO 또는 FIXME 코멘트
console\.(log|error|warn)  # 콘솔 출력
```

### 6-4 파일 유형 필터

특정 유형의 파일에서만 검색할 수 있다.

```
사용자: TypeScript 파일에서만 'interface'를 찾아줘
Claude: [Grep 도구 - type: ts, 패턴: interface]
```

### 6-5 컨텍스트 라인

일치하는 줄 주변의 코드도 함께 볼 수 있다.

```
사용자: 에러 메시지 주변 코드 3줄씩 보여줘
Claude: [Grep 도구 - 패턴: error, -C: 3]
```

- `-A`: 뒤 N줄 (After)
- `-B`: 앞 N줄 (Before)
- `-C`: 앞뒤 N줄 (Context)

## 7. NotebookEdit - 노트북 편집

### 7-1 기본 사용

NotebookEdit는 Jupyter 노트북(.ipynb)의 셀을 편집한다.

```
사용자: 노트북 첫 번째 셀 코드를 수정해줘
Claude: [NotebookEdit 도구로 셀 수정]
```

### 7-2 편집 모드

| 모드 | 기능 |
|------|------|
| replace | 기존 셀 내용 교체 (기본값) |
| insert | 새 셀 추가 |
| delete | 셀 삭제 |

### 7-3 셀 유형

```
cell_type: code      # 코드 셀
cell_type: markdown  # 마크다운 셀
```

### 7-4 활용 예시

```
사용자: 분석 노트북에 시각화 코드 추가해줘
Claude: [NotebookEdit - insert, cell_type: code]
        새로운 시각화 셀을 추가했습니다.
```

## 8. 실전 활용

### 8-1 도구 선택 가이드

| 하고 싶은 것 | 사용할 도구 | 예시 요청 |
|-------------|------------|----------|
| 파일 내용 보기 | Read | "이 파일 보여줘" |
| 새 파일 만들기 | Write | "새 파일 만들어줘" |
| 일부분 수정하기 | Edit | "이 부분만 바꿔줘" |
| 파일 찾기 | Glob | "ts 파일 다 찾아줘" |
| 코드 검색하기 | Grep | "useState 사용하는 곳 찾아줘" |
| 노트북 편집하기 | NotebookEdit | "노트북에 셀 추가해줘" |

### 8-2 조합 활용

여러 도구를 조합해서 복잡한 작업을 수행할 수 있다.

**예시: 특정 패턴을 찾아서 수정하기**
```
사용자: console.log가 있는 파일 찾아서 다 지워줘

Claude:
1. [Grep으로 console.log 있는 파일 찾기]
2. [각 파일에서 Edit로 console.log 제거]
```

**예시: 파일 분석 후 새 파일 생성**
```
사용자: 모든 API 파일 분석해서 문서 만들어줘

Claude:
1. [Glob으로 API 파일 찾기]
2. [Read로 각 파일 읽기]
3. [분석 후 Write로 문서 생성]
```

### 8-3 주의사항

**Read 먼저:**
- Edit나 Write 전에 Read로 파일을 먼저 읽어야 함
- 읽지 않은 파일을 수정하려고 하면 에러 발생

**경로 확인:**
- 절대 경로 사용 권장
- 상대 경로 사용 시 현재 작업 디렉토리 확인

**백업 고려:**
- 중요한 파일 수정 전 git commit 권장
- Write로 덮어쓰면 복구 어려움

---

**작성일: 2025-12-20 / 글자수: 약 5,500자 / 작성자: Claude / 프롬프터: 써니**

