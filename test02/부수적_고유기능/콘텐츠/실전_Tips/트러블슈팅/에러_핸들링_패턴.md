# JavaScript try-catch와 Supabase 에러를 효과적으로 처리하는 패턴

> 이 문서는 JavaScript/TypeScript에서 에러를 효과적으로 처리하는 패턴과 Supabase 에러 처리 방법을 설명합니다.

---

## 핵심 원칙

1. **try-catch로 감싸기**: 비동기 작업은 항상 에러 처리
2. **개발자/사용자 메시지 분리**: console.error와 UI 메시지 구분
3. **민감정보 제외**: 비밀번호, API 키 등은 로그에 남기지 않음
4. **구체적인 에러 분기**: 에러 유형별로 다른 대응

---

## 기본 패턴

```javascript
async function login(email, password) {
  try {
    const { data, error } = await supabase.auth.signInWithPassword({
      email, password
    });

    if (error) throw error;  // Supabase 에러를 throw

    return { success: true, data };

  } catch (error) {
    // 개발자용 로그 (콘솔)
    console.error('로그인 실패:', error.message);

    // 사용자용 메시지 (UI)
    return {
      success: false,
      message: '로그인에 실패했습니다. 다시 시도해주세요.'
    };
  }
}
```

---

## Supabase 에러 코드 처리

```javascript
function handleAuthError(error) {
  switch (error.message) {
    case 'Invalid login credentials':
      return '이메일 또는 비밀번호가 틀립니다.';
    case 'Email not confirmed':
      return '이메일 인증이 필요합니다.';
    case 'User already registered':
      return '이미 가입된 이메일입니다.';
    case 'Password should be at least 6 characters':
      return '비밀번호는 6자 이상이어야 합니다.';
    default:
      return '오류가 발생했습니다. 잠시 후 다시 시도해주세요.';
  }
}
```

---

## 민감정보 보호

```javascript
// 잘못된 예: 민감정보 로그 노출
console.error(`비밀번호: ${password}, API키: ${apiKey}`);

// 올바른 예: 필요한 정보만 로그
console.error('로그인 실패:', { email, errorCode: error.code });
```

---

## HTTP 상태 코드

| 코드 | 의미 | 사용자 메시지 예시 |
|------|------|------------------|
| 400 | 잘못된 요청 | 입력 정보를 확인해주세요 |
| 401 | 인증 필요 | 로그인이 필요합니다 |
| 403 | 권한 없음 | 접근 권한이 없습니다 |
| 404 | 찾을 수 없음 | 요청한 정보를 찾을 수 없습니다 |
| 500 | 서버 오류 | 서버 오류입니다. 잠시 후 다시 시도해주세요 |

---

## Claude Code에게 요청하기

```
"이 함수에 에러 핸들링 추가해줘"
"Supabase 에러 코드별 처리 로직 만들어줘"
"try-catch 패턴으로 수정해줘"
"사용자용 에러 메시지 추가해줘"
```

---

*상세 내용: `브라우저_콘솔_에러_확인하기.md` 참조*
