# 병렬 인스턴스 운영으로 생산성 극대화하기

Claude Code를 하나만 켜서 작업하면, AI가 코드를 생성하는 동안 사람은 기다리고 있어야 합니다. 테스트를 돌리는 동안에도, 검증하는 동안에도 기다림의 연속입니다. 그런데 이 대기 시간에 다른 Claude Code가 다른 작업을 하고 있다면 어떨까요?

Claude Code 제작자인 Boris Cherny는 터미널에서 5개, 브라우저에서 5~10개, 총 10~15개의 Claude Code를 동시에 돌립니다. 하나가 테스트를 돌리는 동안 다른 하나는 리팩토링을 하고, 또 다른 하나는 문서를 작성합니다. 사람의 역할은 코딩이 아니라, 여러 AI를 지휘하고 결과를 검토하는 것으로 바뀝니다.

---

## 핵심 개념: 왜 병렬이 필수인가

일반적인 Claude Code 사용은 이런 흐름입니다.

```
요청 → AI 작업 (대기) → 검토 → 요청 → AI 작업 (대기) → 검토
```

하루 8시간 중 절반 이상이 AI가 작업하는 걸 기다리는 시간입니다. 병렬로 바꾸면 이렇게 됩니다.

```
인스턴스 1: 로그인 페이지 개발 중...
인스턴스 2: 결제 API 테스트 중...
인스턴스 3: README 문서 작성 중...
인스턴스 4: 버그 수정 검증 중...
인스턴스 5: CSS 반응형 작업 중...
```

하나가 작업하는 동안 다른 것들도 동시에 돌아가니, 사람은 완료 알림이 뜨는 순서대로 검토하면 됩니다. 대기 시간이 거의 사라집니다.

---

## 격리가 필요한 이유

같은 폴더에서 Claude Code 여러 개를 돌리면 문제가 생깁니다. 인스턴스 A가 `login.js`를 수정하는 중에 인스턴스 B도 같은 파일을 건드리면 서로의 작업을 덮어씁니다. 이걸 방지하려면 각 인스턴스가 자기만의 독립된 작업 공간을 가져야 합니다.

격리 방법은 두 가지가 있습니다. Git Worktree와 Git Checkout(클론)입니다.

---

## 방법 1: Git Worktree (권장)

Git Worktree는 하나의 저장소에서 여러 개의 작업 폴더를 만드는 기능입니다. 비유하자면, 하나의 도서관(저장소)에서 책을 여러 열람실(워크트리)로 가져가서 각자 읽는 것과 같습니다. 책 자체는 공유하지만, 열람실은 독립적입니다.

**워크트리 만드는 방법:**

```bash
# 현재 프로젝트 폴더에서 실행
git worktree add ../my-project-기능A -b feature-a
git worktree add ../my-project-기능B -b feature-b
git worktree add ../my-project-버그수정 -b bugfix
```

이렇게 하면 프로젝트 옆에 3개의 폴더가 생깁니다. 각 폴더는 독립된 파일 상태를 가지지만, Git 히스토리는 공유합니다.

```
내 프로젝트/              ← 원본
../my-project-기능A/      ← 워크트리 1 (feature-a 브랜치)
../my-project-기능B/      ← 워크트리 2 (feature-b 브랜치)
../my-project-버그수정/    ← 워크트리 3 (bugfix 브랜치)
```

**각 워크트리에서 Claude Code 실행:**

```bash
# 터미널 1
cd ../my-project-기능A
claude

# 터미널 2
cd ../my-project-기능B
claude

# 터미널 3
cd ../my-project-버그수정
claude
```

이제 3개의 Claude Code가 각자 독립된 폴더에서 작업하므로, 파일 충돌이 일어나지 않습니다.

**워크트리 관리:**

```bash
# 현재 워크트리 목록 확인
git worktree list

# 작업 끝난 워크트리 삭제
git worktree remove ../my-project-기능A
```

---

## 방법 2: Git Checkout (별도 클론)

워크트리가 익숙하지 않다면, 프로젝트를 통째로 복사하는 방법도 있습니다. 더 단순하지만 디스크 공간을 더 씁니다.

```bash
# 프로젝트를 여러 폴더에 클론
git clone https://github.com/내계정/my-project.git my-project-작업1
git clone https://github.com/내계정/my-project.git my-project-작업2

# 각각 다른 브랜치로 전환
cd my-project-작업1
git checkout -b feature-login
claude

cd ../my-project-작업2
git checkout -b feature-payment
claude
```

**두 방법 비교:**

| 항목 | Git Worktree | Git Checkout (클론) |
|------|:---:|:---:|
| 디스크 사용량 | 적음 (.git 공유) | 많음 (전체 복제) |
| 생성 속도 | 빠름 (즉시) | 느림 (다운로드 필요) |
| 독립성 | 파일은 독립, Git은 공유 | 완전히 독립 |
| 난이도 | 약간 생소함 | 직관적 |
| 추천 상황 | 일상적 병렬 작업 | 완전 격리가 필요할 때 |

처음이라면 Git Checkout으로 시작하고, 익숙해지면 Git Worktree로 전환하는 것을 추천합니다.

---

## 실전 운영 패턴

병렬 인스턴스를 효과적으로 운영하려면 작업을 서로 겹치지 않게 배분해야 합니다.

**패턴 1: 영역별 분리 (가장 안전)**

| 인스턴스 | 담당 영역 | 수정 파일 |
|----------|----------|----------|
| 1번 | Frontend UI | pages/ 폴더 |
| 2번 | Backend API | api/ 폴더 |
| 3번 | 문서 작성 | docs/ 폴더 |

**패턴 2: 작성자/검토자 분리**

| 인스턴스 | 역할 |
|----------|------|
| 1번 | 코드 작성 |
| 2번 | 1번이 작성한 코드 리뷰 |
| 3번 | 리뷰 반영 후 테스트 |

**패턴 3: 기능별 분리**

| 인스턴스 | 기능 |
|----------|------|
| 1번 | 로그인 기능 구현 |
| 2번 | 결제 기능 구현 |
| 3번 | 알림 기능 구현 |

---

## 워크트리 주의사항

워크트리를 만들면 각 폴더에서 한 가지를 추가로 해줘야 합니다.

첫째, 의존성을 설치해야 합니다. Node.js 프로젝트라면 각 워크트리 폴더에서 `npm install`을 실행합니다. `node_modules`는 Git에 포함되지 않으므로 워크트리마다 따로 설치해야 합니다.

둘째, `.env` 파일처럼 Git에 포함되지 않는 설정 파일을 복사해야 합니다.

셋째, 각 워크트리에서 Claude Code를 처음 시작할 때 `/init`을 실행하면 해당 폴더 구조를 빠르게 파악합니다.

---

## 병합할 때

여러 인스턴스의 작업이 끝나면 하나씩 순서대로 병합합니다. 한꺼번에 병합하면 충돌이 복잡해질 수 있으므로, 하나 병합하고 확인하고, 다음 하나를 병합하는 방식이 안전합니다.

```bash
# 원본 폴더에서
git merge feature-a        # 첫 번째 병합, 확인
git merge feature-b        # 두 번째 병합, 확인
git merge bugfix           # 세 번째 병합, 확인
```

---

## 비용 참고

Claude Code를 동시에 여러 개 실행하면 API 비용도 비례해서 증가합니다. 5개를 동시에 돌리면 비용도 대략 5배입니다. 모든 작업을 병렬로 할 필요는 없고, 독립적이고 시간이 오래 걸리는 작업을 병렬로 돌릴 때 가장 효과적입니다. 간단한 수정이나 질문은 하나의 인스턴스로 충분합니다.

---

## 관리 도구

인스턴스가 많아지면 관리가 번거로워집니다. 이를 도와주는 도구들이 있습니다.

**Claude Squad**는 하나의 화면에서 여러 Claude Code 세션을 관리하는 터미널 도구입니다. 워크트리도 자동으로 만들어줍니다. macOS에서 `brew install claude-squad`로 설치합니다.

**Crystal**은 데스크톱 앱으로, GUI 환경에서 여러 세션을 시각적으로 관리할 수 있습니다.

도구 없이 터미널 탭만으로도 충분히 운영할 수 있으니, 처음에는 2~3개 탭으로 시작해서 점차 늘려가는 것을 추천합니다.

---

*작성일: 2026-01-31*
