# 5회 반복 디버깅 기법

Claude Code에게 버그 수정을 요청했는데 "수정했습니다"라고 하면서도 계속 안 될 때가 있습니다. 이럴 때 "5번 반복해서 디버깅해봐"라고 지시하면 AI가 더 깊이 분석해서 숨겨진 근본 원인을 찾아냅니다.

---

## 언제 사용하나

Claude Code는 보통 가장 가능성 높은 원인부터 빠르게 수정을 시도합니다. 대부분은 이 방식이 효율적이지만, 복잡한 버그에서는 표면적인 수정만 반복하게 됩니다.

다음과 같은 상황에서 이 기법이 효과적입니다. 첫째, "수정했는데 안 돼요"가 2회 이상 반복될 때입니다. 둘째, AI가 "아마 이게 원인일 거예요"라며 추측성 수정만 계속할 때입니다. 셋째, 문제가 단순하지 않고 여러 원인이 얽혀 있을 것 같을 때입니다.

---

## 핵심 지시문

```
안 되는 근본 원인을 신중하게 심각하게 찾아봐.
될 때까지 5번 반복해서 검토 → 수정 → 검토 → 수정 해봐.
그리고 나서 나한테 얘기해.
```

이 지시문이 효과적인 이유는 네 가지입니다.

첫째, "5번 반복"이라고 구체적인 횟수를 지정하면 AI가 한두 번 시도하고 멈추지 않습니다. 그냥 "계속 찾아봐"라고 하면 AI가 언제 멈춰야 할지 모르지만, 숫자를 주면 그만큼 분석합니다.

둘째, "신중하게 심각하게"라는 표현이 AI에게 이 문제가 중요하다는 신호를 줍니다. 빠른 추측 대신 구조적인 분석을 시도하게 됩니다.

셋째, "검토 → 수정 → 검토 → 수정"이라고 프로세스를 명시하면 무작정 수정하지 않고 분석 단계를 거칩니다. 수정하기 전에 검토하고, 수정한 후에 다시 검토하는 사이클을 반복합니다.

넷째, "다 하고 나서 얘기해"라고 하면 AI가 중간에 물어보지 않고 끝까지 분석합니다. 5번의 분석을 모두 마친 후 종합적인 결과를 보고합니다.

---

## 실제 사례

SSALWorks 프로젝트에서 배포된 웹사이트의 진행률이 표시되지 않는 문제가 있었습니다. P0부터 S0까지의 진행률이 모두 0%로 나왔습니다.

처음에 AI는 가장 흔한 원인인 null 체크 누락을 수정했습니다. Supabase 클라이언트가 초기화되기 전에 함수가 호출되는 것 같으니 null 체크를 추가하고 재시도 로직을 넣었습니다. 하지만 여전히 작동하지 않았습니다.

두 번째로 호출 시점을 변경했습니다. 초기화 함수 안에서 직접 호출하도록 수정했습니다. 그래도 안 됐습니다.

이 시점에서 "안 되는 근본 원인을 신중하게 심각하게 찾아봐. 될 때까지 5번 반복해서 검토 → 수정 해봐. 다 하고 나서 얘기해."라고 지시했습니다.

AI가 5번 반복 분석을 시작했습니다. 1-2차에서는 기존 수정이 왜 실패했는지 재검토했습니다. 3차에서 스크립트 블록 구조를 분석하다가 첫 번째 근본 원인을 발견했습니다. `let supabaseClient`가 스크립트 블록 3에서 선언되어 있는데, 이 변수를 사용하는 함수는 스크립트 블록 2에 있었습니다. `let`으로 선언된 변수는 해당 스크립트 블록에서만 접근 가능하기 때문에 다른 블록에서는 undefined였습니다.

4차에서 함수 정의를 확인하다가 두 번째 근본 원인을 발견했습니다. `updatePrepProgress()`라는 함수가 호출되고 있는데, 이 함수가 어디에도 정의되어 있지 않았습니다. 호출만 있고 정의가 없으니 당연히 작동하지 않았습니다.

5차에서 두 가지 근본 원인을 모두 수정하고 검증했습니다. 변수 선언을 `window.supabaseClient`로 바꿔서 전역 접근이 가능하게 하고, 없는 함수 대신 존재하는 함수를 호출하도록 수정했습니다. 배포 후 정상 작동을 확인했습니다.

표면적인 수정으로는 절대 찾을 수 없었던 2개의 숨겨진 근본 원인을 5회 반복 분석으로 발견한 사례입니다.

---

## 주의사항

이 기법은 모든 버그에 필요한 것은 아닙니다. 단순한 오타나 경로 오류처럼 1회 수정으로 해결되는 문제에는 과한 방법입니다. 에러 메시지가 명확해서 원인이 분명한 경우에도 굳이 5번 반복할 필요가 없습니다.

AI가 중간에 "해결됐습니다"라고 해도 직접 테스트해봐야 합니다. AI의 판단을 맹신하지 말고 실제로 작동하는지 확인하세요.

횟수는 상황에 맞게 조절할 수 있습니다. 비교적 단순한 버그라면 "3번 반복해서"라고 하고, 아주 복잡한 버그라면 "7번 반복해서"라고 할 수 있습니다. 5번은 권장 횟수일 뿐입니다.

"지금 몇 번째야?"를 추가하면 AI가 현재 몇 번째 분석 중인지 알려줍니다. 진행 상황을 파악하고 싶을 때 유용합니다.

---

*작성일: 2025-12-23*
