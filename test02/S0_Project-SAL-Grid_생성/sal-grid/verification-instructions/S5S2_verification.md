# S5S2: API Rate Limiting 구현 - 검증 지침

## 검증 정보
- **Task ID**: S5S2
- **Verification Agent**: security-auditor

## 검증 항목

### 1. 코드 검증
- [ ] Rate Limiter 모듈이 올바르게 구현되었는가
- [ ] IP 기반 식별자가 정확하게 추출되는가
- [ ] User ID 기반 제한이 적용되는가
- [ ] 시간 윈도우 계산이 정확한가

### 2. 보안 검증
- [ ] IP Spoofing 방지가 적용되었는가 (X-Forwarded-For 검증)
- [ ] 분산 공격에 대응 가능한가
- [ ] Redis/KV 연결 실패 시 안전한 폴백이 있는가

### 3. 기능 테스트
- [ ] 제한 이내 요청 시 정상 응답
- [ ] 제한 초과 시 429 응답
- [ ] Retry-After 헤더가 정확한가
- [ ] X-RateLimit-* 헤더가 포함되는가

### 4. 엔드포인트별 테스트
- [ ] AI Q&A API: 30회/분 제한 동작
- [ ] 인증 API: 10회/분 제한 동작
- [ ] 일반 API: 100회/분 제한 동작

### 5. 통합 검증
- [ ] 기존 API 기능이 정상 작동하는가
- [ ] 정상 사용자에게 영향이 없는가
- [ ] 로그가 적절히 기록되는가

## 통과 기준

1. 모든 보안 검증 항목 통과
2. Rate Limiting이 정확하게 동작
3. 적절한 에러 응답 반환
4. 기존 기능 회귀 없음

---

## 필수 참조 규칙

| 규칙 파일 | 내용 | 참조 시점 |
|----------|------|----------|
| `.claude/rules/06_verification.md` | 검증 기준 | 핵심 참조 |
