# S5F3: 단일 파일 비대화 해결 (코드 분할) - 검증 지침

## 검증 정보
- **Task ID**: S5F3
- **Verification Agent**: code-reviewer
- **검증 방식**: Phase별 단계 검증 (각 Phase 완료 후 검증)

---

## Phase별 검증 체크리스트

### Phase 1: 분석 검증
- [ ] 분석 결과 문서 존재 확인
- [ ] JS/CSS 블록 식별 완료
- [ ] 의존성 맵 작성 완료
- [ ] 분리 대상 모듈 목록 작성 완료

### Phase 2: CSS 분리 검증
- [ ] `assets/css/main.css` 파일 존재
- [ ] index.html에서 외부 CSS 참조 확인 (`<link rel="stylesheet">`)
- [ ] 모든 페이지 스타일 정상 적용 (육안 검사)
- [ ] 반응형 레이아웃 정상 (모바일/데스크톱)
- [ ] 콘솔에 CSS 관련 에러 없음

### Phase 3: 공통 JS 분리 검증
- [ ] `assets/js/supabase-init.js` 파일 존재
- [ ] `assets/js/auth.js` 파일 존재
- [ ] `assets/js/common.js` 파일 존재
- [ ] Supabase 연결 정상 (API 호출 성공)
- [ ] 로그인 기능 정상 동작
- [ ] 로그아웃 기능 정상 동작
- [ ] 세션 유지 정상 (새로고침 후)
- [ ] 콘솔에 JS 에러 없음

### Phase 4: UI 컴포넌트 JS 분리 검증
- [ ] `assets/js/sidebar.js` 파일 존재
- [ ] `assets/js/modal.js` 파일 존재
- [ ] 사이드바 열기/닫기 동작
- [ ] 모달 열기/닫기 동작
- [ ] 토스트 알림 표시 동작
- [ ] 콘솔에 JS 에러 없음

### Phase 5: index.html 검증
- [ ] index.html 파일 크기 감소 확인 (목표: ~100KB)
- [ ] 외부 스크립트 로딩 순서 정확
- [ ] 모든 기능 정상 동작:
  - [ ] 메인 페이지 로딩
  - [ ] 로그인/로그아웃
  - [ ] 사이드바 기능
  - [ ] 프로젝트 목록 표시
  - [ ] 모달 기능
  - [ ] AI Q&A 접근
- [ ] 콘솔에 에러 없음
- [ ] 네트워크 탭에서 모든 파일 정상 로딩 (200 OK)

### Phase 6: admin-dashboard.html 검증
- [ ] admin-dashboard.html 파일 크기 감소 확인
- [ ] 공통 JS/CSS 재사용 확인
- [ ] `assets/js/admin.js` 파일 존재
- [ ] 관리자 기능 정상 동작:
  - [ ] 대시보드 로딩
  - [ ] 통계 표시
  - [ ] 사용자 관리
  - [ ] 구독 승인
  - [ ] 입금 확인
- [ ] 콘솔에 에러 없음

### Phase 7: 최종 검증
- [ ] 파일 크기 비교표 작성
- [ ] 초기 로딩 속도 측정 결과
- [ ] 캐싱 동작 확인 (반복 방문 시 속도)
- [ ] 모든 페이지 최종 기능 점검 완료

---

## 기능 테스트 체크리스트

### 인증 기능
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|:----:|
| Google 로그인 | OAuth 플로우 정상 → 로그인 완료 | [ ] |
| 이메일 로그인 | 로그인 성공 → 메인 페이지 이동 | [ ] |
| 로그아웃 | 세션 종료 → 로그인 페이지 이동 | [ ] |
| 세션 유지 | 새로고침 후에도 로그인 상태 유지 | [ ] |

### UI 컴포넌트
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|:----:|
| 사이드바 토글 | 열기/닫기 애니메이션 정상 | [ ] |
| 프로젝트 추가 모달 | 열기/닫기, 폼 입력 정상 | [ ] |
| 토스트 알림 | 성공/에러 메시지 표시 정상 | [ ] |
| 드롭다운 메뉴 | 열기/닫기, 항목 선택 정상 | [ ] |

### 페이지 기능
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|:----:|
| 메인 페이지 | 콘텐츠 정상 로딩 | [ ] |
| 프로젝트 목록 | 목록 조회/생성/수정 정상 | [ ] |
| My Page | 프로필/설정 기능 정상 | [ ] |
| AI Q&A | AI 질의응답 정상 (구독자) | [ ] |

### 관리자 기능
| 테스트 항목 | 예상 결과 | 통과 |
|------------|----------|:----:|
| 통계 대시보드 | 차트/수치 정상 표시 | [ ] |
| 사용자 목록 | 조회/검색 정상 | [ ] |
| 구독 승인 | 상태 변경 정상 | [ ] |
| 입금 확인 | 입금 확인 처리 정상 | [ ] |

---

## 성능 검증

### 파일 크기 비교
| 파일 | Before | After | 감소율 |
|------|--------|-------|--------|
| index.html | 732KB | (측정) | (계산) |
| admin-dashboard.html | 315KB | (측정) | (계산) |
| **외부 JS 합계** | - | (측정) | - |
| **외부 CSS 합계** | - | (측정) | - |

### 로딩 속도 비교
| 항목 | Before | After | 개선율 |
|------|--------|-------|--------|
| 초기 로딩 (DOMContentLoaded) | (측정) | (측정) | (계산) |
| 전체 로딩 (Load) | (측정) | (측정) | (계산) |
| 반복 방문 (캐시) | (측정) | (측정) | (계산) |

---

## 코드 품질 검증

### 코드 분리 원칙
- [ ] 각 JS 파일이 단일 책임 원칙 준수
- [ ] 순환 의존성 없음
- [ ] 전역 변수 최소화
- [ ] 모듈 간 인터페이스 명확

### 에러 처리
- [ ] 스크립트 로딩 실패 시 대체 로직 존재
- [ ] 네트워크 에러 시 사용자 피드백 표시
- [ ] 콘솔에 미처리 에러 없음

### 브라우저 호환성
- [ ] Chrome 최신 버전
- [ ] Safari 최신 버전
- [ ] Firefox 최신 버전
- [ ] Edge 최신 버전

---

## 통과 기준

### 필수 조건 (모두 충족)
1. 모든 Phase 검증 체크리스트 통과
2. 기능 테스트 100% 통과
3. index.html 크기 50% 이상 감소 (732KB → 366KB 이하)
4. 콘솔 에러 0개
5. 모든 외부 파일 정상 로딩 (HTTP 200)

### 권장 조건
1. 초기 로딩 속도 20% 이상 개선
2. 반복 방문 시 로딩 속도 50% 이상 개선 (캐싱 효과)
3. Lighthouse 성능 점수 개선

---

## 검증 실패 시 조치

### 기능 오류 발생
1. 해당 Phase 롤백 (`git checkout -- 파일명`)
2. 오류 원인 분석 (콘솔 로그, 네트워크 탭)
3. 수정 후 해당 Phase 재검증

### 성능 목표 미달
1. 추가 분할 가능 영역 탐색
2. 불필요한 코드 제거
3. 스크립트 로딩 최적화 (defer/async)

---

## 필수 참조 규칙

| 규칙 파일 | 내용 | 참조 시점 |
|----------|------|----------|
| `.claude/rules/06_verification.md` | 검증 기준 | 핵심 참조 |
| `.claude/rules/04_grid-writing-supabase.md` | Grid 업데이트 | 검증 완료 후 |

---

**문서 끝**
