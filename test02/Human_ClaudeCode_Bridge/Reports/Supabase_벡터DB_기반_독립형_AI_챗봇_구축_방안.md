# Supabase 벡터DB 기반 독립형 AI 챗봇 구축 방안

> 작성일: 2026-01-06
> SSAL Works와 독립적으로 어디서나 사용 가능한 AI 챗봇 구축 방안

---

## 1. 개요

SSAL Works AI 튜터 기술을 기반으로, 독립적으로 배포 가능한 AI 챗봇 구축 방안을 정리한다.

---

## 2. 독립형 AI 챗봇 옵션

| 방식 | 설명 | 필요한 것 |
|------|------|----------|
| **HTML 단독 파일** | 사용자가 API 키 입력 | Gemini/OpenAI API 키 |
| **서버 포함** | API 키 숨김 (Vercel 등) | 호스팅 + API 키 |
| **RAG 포함** | 특정 문서 기반 답변 | 위 + 벡터 DB |

---

## 3. 지식 연결 방법 (용량별)

| 지식 용량 | 방법 | 구조 |
|----------|------|------|
| **소량** (A4 10장 이내) | 시스템 프롬프트에 직접 삽입 | HTML 1개로 끝 |
| **중간** (A4 50장 이내) | JS 파일에 텍스트 저장 | HTML + JS 파일 |
| **대용량** (책 수준) | RAG (벡터 검색) | 서버 + 벡터 DB 필요 |

### 소~중간 용량 방식
```
사용자 질문 → 시스템 프롬프트에 지식 포함 → AI가 그 지식 기반으로 답변
```

### 대용량 방식 (RAG)
```
사용자 질문 → 관련 내용만 검색 → 검색된 부분 + 질문 → AI 답변
```

---

## 4. 벡터 DB 선택

| 서비스 | 비용 | 장점 | 단점 |
|--------|------|------|------|
| **Supabase pgvector** | 무료 (500MB) | DB+벡터 통합, SQL 사용 | 초대규모엔 느림 |
| Pinecone | 유료 ($70/월~) | 빠름, 전문 서비스 | 비쌈, 별도 관리 |
| Chroma | 무료 (로컬) | 무료 | 서버에 직접 설치 필요 |

### Supabase pgvector 추천 이유
- 무료로 수만 건 충분히 처리
- 일반 DB(사용자, 대화 기록)와 벡터 DB 한 곳에서 관리
- SSAL Works에서 이미 검증됨
- 설정 간단 (SQL 한 줄로 활성화)

### 적합한 규모
- 문서 수천~수만 개 → Supabase 충분
- 문서 수백만 개 이상 → Pinecone 고려

---

## 5. SSAL Works AI 튜터 현재 구조 (참고)

### 데이터 흐름
```
MD 파일 225개 (Tips, Guides 등)
       ↓ 임베딩 변환
Supabase content_embeddings 테이블 (pgvector)
       ↓ 질문 시 벡터 검색
관련 내용 찾기 → Gemini에게 전달 → 답변
```

### DB 테이블 구조

| 테이블 | 용도 |
|--------|------|
| `content_embeddings` | 지식 벡터 저장 (RAG용) |
| `tutor_conversations` | 대화 세션 (사용자별) |
| `tutor_messages` | 개별 메시지 기록 |

### 장점
- 여러 기기에서 대화 이어하기 가능
- 대화 히스토리 조회 가능
- 벡터 검색 + 대화 저장 = Supabase 하나로 해결

---

## 6. 결론

**대용량 지식 기반 독립형 AI 챗봇 구축 시:**

1. **벡터 DB**: Supabase pgvector (무료, 가성비 최고)
2. **AI 모델**: Gemini API (무료 티어 있음)
3. **호스팅**: Vercel (무료)
4. **대화 저장**: 같은 Supabase에 저장

Supabase 하나로 벡터 검색 + 대화 기록 + 사용자 관리 전부 해결 가능.

---

*참고: SSAL Works AI 튜터 구현 계획 - `bright-forging-sparrow.md`*
