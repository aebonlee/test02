# User Flow #1: 회원가입 (Signup Flow)

> **최종 수정:** 2025-12-25
> **버전:** 3.1 (웰컴 크레딧 ₩50,000, 3개월 무료 반영)

---

## 1. 플로우 개요

**목적:** 신규 사용자가 SSAL Works에 무료로 계정을 생성하고, Books 학습 콘텐츠에 즉시 접근한다.

**시작:** 랜딩 페이지에서 "회원가입" 버튼 클릭
**종료:** 계정 생성 완료 + Dashboard 진입 + Books 무료 열람 가능
**예상 소요 시간:** 3분

---

## 2. 정상 플로우 (Normal Flow)

### Step 1: 회원가입 페이지 진입
- **액션:** 사용자가 "회원가입" 버튼 클릭
- **페이지:** `/signup`
- **표시 내용:**
  - 페이지 제목: "SSAL Works 회원가입"
  - 회원가입 폼
  - 무료 회원가입 안내

### Step 2: 회원 정보 입력
**필수 입력 항목:**

| 필드 | 타입 | 제약 조건 | 검증 |
|------|------|----------|------|
| 이메일 | email | 필수, 고유값 | 이메일 형식 검증 |
| 비밀번호 | password | 필수, 8자 이상 | 영문+숫자+특수문자 |
| 비밀번호 확인 | password | 필수 | 비밀번호와 일치 |
| 닉네임 | text | 필수, 2-20자 | 중복 검증 |
| 실명 | text | 필수, 2-50자 | 한글/영문 |

**실명 필수 이유:**
- 설치비 납부 시 입금자명 확인
- 환불 시 본인 확인
- 세금계산서 발행
- 비즈니스 멘토링 신뢰 관계

### Step 3: 약관 동의
- **필수 동의:**
  - ✅ 서비스 이용약관 (필수)
  - ✅ 개인정보 처리방침 (필수)
- **선택 동의:**
  - ☑️ 마케팅 정보 수신 (선택)

### Step 4: "회원가입" 버튼 클릭
- **액션:** 서버로 회원가입 요청 전송
- **API:** `POST /api/auth/signup`
- **Request Body:**
```json
{
  "email": "user@example.com",
  "password": "hashed_password",
  "nickname": "써니",
  "real_name": "김써니",
  "agreed_terms": true,
  "agreed_privacy": true,
  "marketing_consent": false
}
```

### Step 5: 서버 검증
- **검증 항목:**
  1. 이메일 형식 유효성
  2. 이메일 중복 확인 (Supabase Auth)
  3. 닉네임 중복 확인 (users 테이블)
  4. 비밀번호 강도 검증
  5. 필수 약관 동의 확인

### Step 6: 계정 생성

**회원 ID 생성:**
- 8자리 랜덤 영숫자 생성 (예: `A3B5C7D9`)
- 중복 확인 후 고유한 ID 부여

**Supabase Auth:**
- `supabase.auth.signUp()` 호출

**users 테이블 레코드 생성:**
```sql
INSERT INTO users (
  id, user_id, email, nickname, real_name,
  subscription_status, installation_fee_paid,
  credit_balance, created_at
) VALUES (
  'uuid', 'A3B5C7D9', 'user@example.com', '써니', '김써니',
  'free', false,
  0, NOW()
);
```

> **💡 참고:** 회원가입 시 `credit_balance`는 0입니다.
> 설치비 납부 완료 시 ₩50,000 웰컴 크레딧이 지급됩니다.
> → 상세: `2_Project_Registration/flow.md` Step 5 참조

**API Response:**
```json
{
  "success": true,
  "user_id": "A3B5C7D9",
  "email": "user@example.com",
  "nickname": "써니",
  "message": "회원가입이 완료되었습니다"
}
```

> **⚠️ 구현 시점:** S1. 프로토타입 제작 단계에서 실제 DB 테이블 생성
> **참조:** `P3_프로토타입_제작/Database/` 폴더

### Step 7: 회원가입 완료 + 환영 안내
- **페이지:** Dashboard 진입
- **환영 팝업:**

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎉 SSAL Works에 오신 것을 환영합니다!

회원 ID: A3B5C7D9
닉네임: 써니

✅ 무료로 이용 가능:
- 📖 Books: 학습 콘텐츠 무제한
- ❓ FAQ: 자주 묻는 질문
- 📋 사용 설명서 전체
- ℹ️ 서비스 소개 전체

💳 크레딧 충전 시:
- 🤖 AI Q&A (ChatGPT, Gemini, Perplexity)

💰 설치비 납부 시 (₩3,000,000):
- 📁 프로젝트 평생 무제한 등록
  (동시 1개만 진행)
- 🎁 특별 혜택:
  · 플랫폼 이용료 3개월 무료
  · 성공 시 50% 환불 (₩1,500,000)

[시작하기] [사용 설명서 보기]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### Step 8: Dashboard 진입
- **페이지:** `/dashboard`
- **이용 가능 기능:**
  - ✅ Books (무료 무제한)
  - ✅ FAQ (무료)
  - ✅ 사용 설명서 (무료)
  - ✅ 서비스 소개 (무료)
  - 💳 AI Q&A (크레딧 충전 필요 - ChatGPT, Gemini, Perplexity)
  - 💰 프로젝트 등록 (설치비 필요)

---

## 3. 예외 플로우 (Exception Flows)

### 3-1. 이메일 중복
- **조건:** 이미 존재하는 이메일로 가입 시도
- **시스템 응답:**
```
❌ 이미 가입된 이메일입니다.
[로그인하기] [다른 이메일 사용]
```

### 3-2. 닉네임 중복
- **조건:** 이미 존재하는 닉네임 입력
- **시스템 응답:**
```
❌ 이미 사용 중인 닉네임입니다.
추천: 써니123, sunny_2025, 써니_프로젝트
```

### 3-3. 비밀번호 불일치
- **조건:** 비밀번호와 비밀번호 확인이 다름
- **시스템 응답:**
```
❌ 비밀번호가 일치하지 않습니다.
```

### 3-4. 비밀번호 강도 부족
- **조건:** 8자 미만 또는 영문+숫자+특수문자 미충족
- **시스템 응답:**
```
❌ 비밀번호가 너무 약합니다.
최소 8자 이상, 영문+숫자+특수문자 포함
```

### 3-5. 필수 약관 미동의
- **조건:** 필수 약관 체크 안 함
- **시스템 응답:**
```
❌ 필수 약관에 동의해주세요.
```

---

## 4. 플로우 다이어그램

```
[랜딩 페이지]
    ↓
[회원가입 버튼]
    ↓
[회원가입 폼]
- 이메일 (필수)
- 비밀번호 (필수)
- 비밀번호 확인 (필수)
- 닉네임 (필수)
- 실명 (필수)
    ↓
[약관 동의]
- 서비스 이용약관 (필수)
- 개인정보 처리방침 (필수)
- 마케팅 수신 (선택)
    ↓
[회원가입 버튼]
    ↓
[서버 검증]
    ├─ ❌ 이메일 중복 → 오류
    ├─ ❌ 닉네임 중복 → 오류
    ├─ ❌ 비밀번호 불일치 → 오류
    └─ ✅ 검증 통과
         ↓
    [계정 생성]
    - Supabase Auth
    - users 테이블 레코드
    - subscription_status: 'free'
         ↓
    [환영 팝업]
    - 무료 기능 안내
    - 유료 기능 안내
         ↓
    [Dashboard 진입]
    - Books 무료 열람 ✅
    - 프로젝트 등록은 설치비 필요 💰
```

---

## 5. 데이터 플로우

### 회원가입 시 생성되는 데이터

**Supabase Auth:**
```json
{
  "id": "uuid",
  "email": "user@example.com",
  "encrypted_password": "bcrypt_hash",
  "created_at": "2025-12-01T10:00:00Z"
}
```

**users 테이블:**
```json
{
  "id": "uuid",
  "user_id": "A3B5C7D9",
  "email": "user@example.com",
  "nickname": "써니",
  "real_name": "김써니",
  "subscription_status": "free",
  "installation_fee_paid": false,
  "credit_balance": 0,
  "created_at": "2025-12-01T10:00:00Z"
}
```

> **⚠️ 구현 시점:** S1. 프로토타입 제작 단계에서 실제 DB 테이블 생성
> **참조:** `P3_프로토타입_제작/Database/` 폴더

---

## 6. 성공 기준

### 6-1. 기능적 성공
- ✅ 사용자가 회원가입 폼을 작성할 수 있다
- ✅ 모든 입력 검증이 작동한다
- ✅ 계정이 생성되고 DB에 저장된다
- ✅ Dashboard에 진입한다
- ✅ Books를 무료로 열람할 수 있다

### 6-2. UX 성공
- ✅ 무료 회원가입이 명확히 안내된다
- ✅ 오류 메시지가 명확하다
- ✅ 유료 기능(프로젝트 등록)이 명확히 구분된다

### 6-3. 비즈니스 성공
- ✅ 진입장벽 제거 (무료 회원가입)
- ✅ 학습 콘텐츠로 가치 확인
- ✅ 자연스러운 유료 전환 동선

---

## 7. 구현 시 고려사항

### 7-1. 보안
- 비밀번호 해싱: bcrypt (10 rounds)
- HTTPS 필수
- CSRF 토큰 사용
- SQL Injection 방지 (Supabase RLS)

### 7-2. 성능
- 회원가입 응답 시간: < 2초
- 이메일/닉네임 중복 검사: < 500ms

### 7-3. 접근성
- 키보드 탐색 지원
- 스크린 리더 호환
- 명확한 오류 메시지
- 고대비 모드 지원

---

**문서 작성:** Claude Code
**승인:** 2025-12-01
